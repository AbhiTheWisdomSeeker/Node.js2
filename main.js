// const ChName = "Romeo";
// const ChAge = 25;

// console.log(ChName);
// console.log(ChAge);

/*********************************************************************************************************************************************************** 
 * *********************************************************** WayOne to Import ******************************************************************************
 * ************************************************impoting just a variable **********************************************************************************************************
***********************************************************************************************************************************************************/

//const storing_way1 = require('./Module1.js')

//console.log(storing_way1);

/*********************************************************************************************************************************************************** 
 * **********************************************************************************************************************************************************
 * **********************************************************************************************************************************************************
***********************************************************************************************************************************************************/

/*********************************************************************************************************************************************************** 
 * *********************************************************** WayOne to Import ******************************************************************************
 * ************************************************impoting just a Fuction in 2 ways **********************************************************************************************************
***********************************************************************************************************************************************************/


// const sayHi = require('./Module2')
// const fun1 = require('./Module3.js');
// fun1.Fun1('Abhi');
// fun1.Fun2(25);

/*********************************************************************************************************************************************************** 
 * **********************************************************************************************************************************************************
 * **********************************************************************************************************************************************************
***********************************************************************************************************************************************************/


/*********************************************************************************************************************************************************** 
 * *********************************************************** Build In Modules ******************************************************************************
 * **********************************************************************************************************************************************************
***********************************************************************************************************************************************************/

// const OS =require('os');
// UserInfo=OS.userInfo();
// console.log(UserInfo);
// console.log(OS.uptime());
// console.log(OS.totalmem());

/*********************************************************************************************************************************************************** 
 * **********************************************************************************************************************************************************
 * **********************************************************************************************************************************************************
***********************************************************************************************************************************************************/

/*********************************************************************************************************************************************************** 
 * *********************************************************** Path Module ******************************************************************************
 * **********************************************************************************************************************************************************
***********************************************************************************************************************************************************/
// First Create the Content(Folder) and Inside that folder Create A SubFolder and a file inside that the sub folder 
// then 

// const Path = require('path') // import path Module (BuildIn r eady in Node.js)

// console.log(Path.sep)

// const filePath = Path.join('\Content','SubFoler','Some.txt')
// console.log(filePath)
// const Base = Path.basename(filePath)
// console.log(Base)


// See a resolve first
/*********************************************************************************************************************************************************** 
 * **********************************************************************************************************************************************************
 * **********************************************************************************************************************************************************
***********************************************************************************************************************************************************/

/*********************************************************************************************************************************************************** 
 * *********************************************************** FS Module *********************************************************************************
 * ****************************************************************Interaction with File******************************************************************
***********************************************************************************************************************************************************/


/*********************************************************************************************************************************************************** 
 * **********************************************************************************************************************************************************
 * **********************************************************************************************************************************************************
***********************************************************************************************************************************************************/

/*********************************************************************************************************************************************************** 
 * ********************************************************************************************************************************************
 * ****************************************************************Important befor Node.js******************************************************************
***********************************************************************************************************************************************************/


/***
 * After this 
 * about npn installation and npm init and init -y(without asking anything in Terminal)
 * and after this i guess about git
 * 
*/


/***
 * Something about the Script in packager.json 
 * in  script we can define every time wheb 'npm start' is writen in the terminal it will use what ever the thing we writen in the script section 
 * 
 * example 
 * this is by default 
 *  "scripts": {
    "start": "echo \"Error: no test specified\" && exit 1"
  },
 * 
 * after  changing it to ('node main.js') we can use npm start and it will every time use this mathod 
 * now lets say we used nodemon insted then it will use the nodemon
 * 
 * "scripts": {
    "start": "node main,js"
  },
 *                       or 
 *   "scripts": {
    "start": "nodemon main.js"
  },
 */

/*********************************************************************************************************************************************************** 
 * **********************************************************************************************************************************************************
 * **********************************************************************************************************************************************************
***********************************************************************************************************************************************************/

/*********************************************************************************************************************************************************** 
 * ********************************************************************************************************************************************
 * ****************************************************************Very Important befor Node.js******************************************************************
***********************************************************************************************************************************************************/
//Event loop
//Async pattern
//event emitter and streams
//


// after this i changed the Vidio cause its getting too complex in that 8H video 
// so i changed it to this one
// ..... I will shift to this 8 H Video latter 


/*********************************************************************************************************************************************************** 
 * **********************************************************************************************************************************************************
 * **********************************************************************************************************************************************************
***********************************************************************************************************************************************************/


/*********************************************************************************************************************************************************** 
 * ******************************************************************Taking Input form the Terminal**************************************************************************************
 * ********************************************************************************************************************************************************
***********************************************************************************************************************************************************/

// const fs = require('fs')

// const input = process.argv;
// const dirname=__dirname+"."

// if(input[2]=="add"){
//   fs.writeFileSync(path)
// }

/*********************************************************************************************************************************************************** 
 * ******************************************************************Express starting here**************************************************************************************
 * ********************************************************************************************************************************************************
***********************************************************************************************************************************************************/


// const express = require('express')
// const app = express()
// const filepath = require('path')
// app.get('',(req,resp)=>{
//   resp.send('Hello world')
// })

// app.get('/about',(req,resp)=>{
//   resp.send('This is about page')
// })

// app.listen(8000)
// const staticpath= filepath.join(__dirname,'Files')
// app.get('/about',(_,resp)=>{
//   resp.sendFile(`${staticpath}/about.html`)
// })

// app.set('view engine','ejs')

// const reqFilter=(req,resp,next)=>{
//   if(!req.query.age){
//     resp.send('Please enter your age')
//   }
//   else if(req.query.age<18){
//     resp.send('Sorry you are not allowed')
//   }
//   else{
//     next()
//   }
// }




// app.get('/profile',reqFilter,(_,resp)=>{
//   const user = {
//     name: 'Amit',
//     age: '20',
//     gand:'Black'
//   }
//   resp.render('profile',{user})
// })
// app.get('/login',reqFilter,(_,resp)=>{
//   resp.render('login')
// })

// app.listen(8000)


/*********************************************************************************************************************************************************** 
 * ********************************************************************************************************************************************************
 * ********************************************************************************************************************************************************
***********************************************************************************************************************************************************/


/*********************************************************************************************************************************************************** 
 * ******************************************************************MongoDB basic here**************************************************************************************
 * ********************************************************************************************************************************************************
***********************************************************************************************************************************************************/

/*/////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////
{{{{{         Data Base connection Code from Different file       }]]]]]]]]///////
                                                                           /////// 
const {MongoClient} = require('mongodb');                                  ///////
const url = 'mongodb://localhost:27017';                                   ///////
                                                                           ///////
const database = 'e-comm'                                                  ///////
const client = new MongoClient(url)                                        ///////
                                                                           ///////
async function dbConnect(){                                                ///////                sub Category of Toppics
  let result = await client.connect()                                      ///////
  let db = result.db(database)                                             ///////
  return db.collection('Products')                                         ///////
}                                                                          ///////
                                                                           ///////
module.exports = dbConnect;                                                ///////
                                                                           ///////
//////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////*/

/*
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
[[[[[[[[[[[[[[[[[[[[[             Data Retrival code                     ]]]]]]]]]]]]]]]]]]]]]
const dbConnect = require('./mongoCon');

dbConnect().then((resp)=>{
  resp.find({}).toArray().then((data=>{
    console.log(data);
  }))
})

const main = async ()=>{
  const db= await dbConnect();
  const data = await db.find({modelName:'x7'}).toArray()
  console.log(data);
}
main()

const main2 = async ()=>{
  const db = await dbConnect();
  const data = await db.find({modelName:'15 pro'}).toArray()
  console.log(data);
}
main2()



////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////*/





// const dbConnect = require('./mongoCon');

// dbConnect().then((resp)=>{
//   resp.find({}).toArray().then((data=>{
//     console.log(data);
//   }))
// })

// const main = async ()=>{
//   const db= await dbConnect();
//   const data = await db.find({modelName:'x7'}).toArray()
//   console.log(data);
// }
// main()

// const main2 = async ()=>{
//   const db = await dbConnect();
//   const data = await db.find({modelName:'15 pro'}).toArray()
//   console.log(data);
// }
// main2()


/////////////////////////////////////////////////////////////////////Try Somthing My self but Unsuccesfull /////////////////////////////////////////////////

// const { result } = require('lodash');
// const {insertO} = require('./insert')

// let data = process.argv[2];
// res = data.replace(/['"]+/g,'')
// console.log(res);

// insertO(res)

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////// Update code from another File ////////////////////////////////////////////////////
// const dbConnect = require('./mongoCon')

// const update = async ()=>{
//     const db = await dbConnect()
//     const result = await db.updateOne({modelName:'x7'},{$set:{modelName:'Realme x7'}})
//     console.log('ran successfull')
//     console.log('This is the OverView  : - ')
//     console.log(result)
// }


// module.exports = update;

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// const update = require('./update')

// update();

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////







// let a=10
// let b=0

// let waitingData = new Promise((resolve,reject)=>{
//   setTimeout(()=>{resolve(30)})

// },2000).then((data)=>{
//   b=data
//   console.log(a+b)
// })




/*********************************************************************************************************************************************************** 
 * ******************************************************************API  basic here**************************************************************************************
 * ********************************************************************************************************************************************************
***********************************************************************************************************************************************************/


// const express = require('express')
// const app = express()
// const dbConnect = require('./mongoCon')
// const mongodb = require('mongodb')

// app.use(express.json())

// app.get('/', async (req, resp) => {
//   const db = await dbConnect();
//   const data = await db.find().toArray();
//   console.log(data)
//   resp.send({ data })
//   resp.end

// })

// app.post('/', async (req, resp) => {
//   const data = await dbConnect()
//   const result = await data.insertOne(req.body);

//   resp.send(result)

// })
// app.put('/', async (req,resp)=>{
//   const db = await dbConnect();
//   const result = await db.updateOne({modelName:req.body.modelName},{$set:req.body}

//   )
//   resp.send(result);

// })

// app.delete('/:id',async(req,resp)=>{
//   const db = await dbConnect();
//   const result = await db.deleteOne({_id: new mongodb.ObjectId(req.params.id)});
//   resp.send(result);

// })

// app.listen(8000)


/*********************************************************************************************************************************************************** 
 * ******************************************************************Mongoose API  basic here**************************************************************************************
 * ***************************************************************************Mongoose advanced package of Mongodb Connect it has schemas and models ******************************
***********************************************************************************************************************************************************/


// const mongoose = require('mongoose')

// mongoose.connect('mongodb://localhost:27017/e-comm')
//   .then(() => console.log('Connected to MongoDB...'))
//   .catch(err => console.error('Could not connect to MongoDB...'))

// const ProductsSchema = new mongoose.Schema({
//   modelName: String,
//   Brand: String,
//   price: Number,
//   catagory: String
// })

// const save = async () => {
//   const Productsmodel = mongoose.model('Product', ProductsSchema)
//   let data = new Productsmodel({
//       modelNames:'Samsung Galaxy M31s',
//       Brand:'Samsung',
//       price: 20000,
//       catagory:'Mobile'
//   })
//   let result = await data.save()
//   console.log(result)
// }
// //save()

// const updateInDB = async ()=>{
//   const Product = mongoose.model('Product',ProductsSchema);
//   const data = await Product.updateOne({modelNames:'Samsung Galaxy M31s'},{$set:{price:25000}});
//   console.log(data);
// }

// const deleteDB = async ()=>{
//   const Product = mongoose.model('Product',ProductsSchema);
//   const data  = await Product.deleteOne({modelName:'Oppo A78'})
//   console.log(data);
// }
//////////////////////////////////////////////////////
// there is same code for Find too for data retrival// 
//////////////////////////////////////////////////////


/*********************************************************************************************************************************************************** 
 * ******************************************************************Mongoose API  basic here*****************************************************************************
 * ******************************************************************Mongoose advanced package of Mongodb Connect it has schemas and models ******************************
***********************************************************************************************************************************************************/
///Get,POST ,PUT ,DELETE API using POStMAN

// We make three file first kown as configure and products

// const express = require('express')
// require('./confige')
// const Product = require('./Product')

// const app = express();

// app.use(express.json());

// app.post('/enter',async (req,resp)=>{
//   let data =  new Product(req.body);
//   let result = await data.save();
//   resp.send(result); 
// })

// app.get('/find',async (req,resp)=>{
//   let data = await Product.find(req.body)
//   resp.send(data);
// })

// app.delete("/delete/:_id",async (req,resp)=>{
//   console.log(req.params)
//   let data = await Product.deleteOne(req.params)
//   resp.send(data)
// })

// app.put("/update/:_id",async (req,resp)=>{
//   let data = await Product.updateOne(req.params,{$set:req.body});
//   resp.send(data);
// })
// app.listen(8000);




/*********************************************************************************************************************************************************** 
 * ******************************************************************MULTER File UPLOAD*********************************************************************
 * *********************************************************************************************************************************************************
***********************************************************************************************************************************************************/
//     Install MULTER
//     POST API
//     FUNCTION FOR MULDER AND UPLOAD


// const { fileLoader } = require('ejs');
// const express = require('express');
// const multer = require('multer');
// const app = express();


// const upload = multer({
//   storage: multer.diskStorage({
//     destination: function (req, file, cb) {
//       cb(null, './uploads');
//     },
//     filename: function (req, file, cb) {
//       cb(null, file.originalname);
//     }
//   })
// }).single("user_file")


// app.post('/upload',upload,(req, resp) => {
//   resp.send('Uploading file ....')
// })


// app.listen(8000);






// const express = require('express');
// const multer = require('multer');
// const app = express();

// const upload = multer({
//   storage: multer.diskStorage({
//     destination: function (req, file, cb) {
//       cb(null, './uploads');
//     },
//     filename: function (req, file, cb) {
//       cb(null, file.originalname);
//     }
//   })
// }).single('user_file');

// app.post('/upload',upload, (req, resp) => {
//   resp.send('Uploaded the Content ');

// })

// app.listen(8000);

/*********************************************************************************************************************************************************** 
 * ****************************************************************** About OS Module **********************************************************************
 * *********************************************************************************************************************************************************
***********************************************************************************************************************************************************/

// const os = require('os');
// console.log(os.arch());
// console.log(os.freemem()/(1024*1024*1024));         unused RAM
// console.log(os.totalmem()/(1024*1024*1024));        total RAM
// console.log(os.platform());                         win32
// console.log(os.release());                          version
// console.log(os.type());                             Window NT
// console.log(os.uptime());                           1007243.25
// console.log(os.userInfo());                         user Info

// console.log(os.networkInterfaces());                network Details 
// console.log(os.cpus());                             cpu Info
// console.log(os.homedir());                          diractory
// console.log(os.hostname());                         
// console.log(os.endianness());    
// console.log(os.loadavg());       


/*********************************************************************************************************************************************************** 
 * ****************************************************************** Event call and Event Listeners *******************************************************
 * *********************************************************************************************************************************************************
***********************************************************************************************************************************************************/

// Event calling and handling basicaly


// const express = require('express')
// const EventEmitter = require('events')
// const app = express()
// const myEmitter = new EventEmitter()

// let count = 0; 

// myEmitter.on('gandu',()=>{
//   count++;
//   console.log('gandu - '+count);
// })


// app.get('/',(req,resp)=>{
//   myEmitter.emit('gandu')
//   resp.send('Gandu 1!')
// })
// app.get('/G2',(req,resp)=>{
//   myEmitter.emit('gandu')
//   resp.send('Gandu 2!')
// })
// app.get('/G3',(req,resp)=>{
//   myEmitter.emit('gandu')
//   resp.send('Gandu 3!')
// })

// app.get('/G4',(req,resp)=>{
//   myEmitter.emit('gandu')
//   resp.send('Gandu 4!')
// })




// app.listen(8000)



//////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////
////////// const x= 10;                                                           ////////////
////////// console.log(x++)            //This Gives Error                         ////////////
//////////                                                                        ////////////
//////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////





////Somthing About REPL = Read Eval Print Repeat ,,,,, Eval is Calculations


/*********************************************************************************************************************************************************** 
 * ****************************************************************** Conneting API with MYsql *************************************************************
 * *********************************************************************************************************************************************************
***********************************************************************************************************************************************************/

// var MySQL = require('mysql');

// var con = MySQL.createConnection({
//   host:'localhost',
//   user:'root',
//   password:'',
//   database:'testDB'
// })

// con.connect((err)=>{
//   if(err) throw err;
//   console.log('Connected to MySQL')
// })
// con.query("INSERT INTO Persons(PersonID,LastName,FirstName,Address,City) VALUE ('92','Jadon','Amit','Sanwariya Nagar','Dehrisaray')",(err,result)=>{
//   if(err) throw err;
//   console.log(result);
// })


//"INSERT INTO Persons(PersonID,LastName,FirstName,Address,City) VALUE ('92','Patidar','Deepak','Dhaniya Khedi','Nalakheda')"

//"DELETE FROM Persons where PersonID = 91"


const express = require('express');
const con = require('./configsql');
const app = express();
app.use(express.json());

app.get('/',(req,resp)=>{
  con.query("SELECT * FROM persons",(err,result)=>{
    if(err) resp.send(err);
    resp.send(result);
  });


})

app.post('/',(req,resp)=>{
  const data = req.body;
  con.query("INSERT INTO persons SET ?",data,(err,result,fields)=>{
    if(err) throw err;
    resp.send(result);
  })
});

app.listen(8000);



